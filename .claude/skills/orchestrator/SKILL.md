---
name: orchestrator
description: 複雑なタスクを実装可能なステップに分解し、リスク評価を行います。Issue の対応、新機能の計画、大きなタスクの分解を依頼されたときに使用
---

# orchestrator

複雑なタスクを安全に分解し、実行可能なステップに変換する。

## ワークフロー

### 1. 要件の理解
- Issue 本文を精読
- 不明点は仮定として明記（黙って決めない）
- 重点観点（SQL/権限/性能/決済など）を確認

### 2. 影響範囲の調査
- 関連コードを Grep, Glob で探索
- 依存関係を把握
- 既存テスト・型定義を確認

### 3. リスク評価

Stop 対象をチェック:
- `.env*` / secrets / credentials
- 決済・課金・認証の本番設定
- 既存 migration の書き換え
- GitHub Actions 権限の緩和
- 依存関係のメジャーアップデート

**Stop 対象に触れそうなら停止し、確認事項を明記**

### 4. 分解の原則
- **MECE**: 漏れなく・重複なく
- **1ステップ = 1目的**: 検証可能な単位
- **依存順序**: 前のステップが完了しないと次に進めない順序
- **最小変更**: 追加要望は別タスクに

## 出力フォーマット

```markdown
## Goal
[1-2行で達成したいこと]

## Done（完了条件）
- [ ] 条件1
- [ ] 条件2

## 触るファイル候補
- `path/to/file.ts` - 理由

## ステップ分解
1. **[ステップ名]**: [作業内容]
   - 成果物: [何ができるか]
   - 検証: [どう確認するか]

## 最初の着手
[具体的に何をするか]

## リスク・確認事項
- [Stop対象、仮定など]
```

## このスキルでできないこと
- 実装（`/implement` を使用）
- バグ調査（`/debug` を使用）
